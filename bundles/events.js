!function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n?n:e)},d,d.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";var o=(e("utils/log"),e("utils/appInfo")),r=e("utils/track"),i="alwaysOpenDocked",a=function(){chrome.storage.local.get(i,function(e){var t=e?!!e[i]:!1;chrome.browserAction.setPopup({popup:"/pages/"+(t?"openDocked.html":"popup.html")})})};chrome.storage.onChanged.addListener(function(e,t){"local"===t&&e[i]&&a()}),a();chrome.runtime.onInstalled.addListener(function(e){e=e||{};var t=chrome.storage.local,n="installedVersion";t.get(n,function(i){var a=o.version,c=i[n]||e.previousVersion;c?a!==c?r.event("general","update",a):r.event("general","reenable",a):r.event("general","install",a);var s={};s[n]=a,t.set(s)})}),chrome.runtime.onUpdateAvailable.addListener(function(){chrome.runtime.reload()});var c,s=function(e){var t=300,n=0,o=400,r=chrome.extension.getURL("/pages/popup.html");chrome.tabs.query({url:r},function(i){if(i.length)return chrome.windows.remove(i[0].windowId,function(){});if(!c||c.id!==e.id){var a=r+"#win/"+e.id;c={id:e.id,original:{width:e.width,left:e.left,state:e.state},current:{width:e.width,left:e.left,state:"normal"}};var s=screen.availWidth-(e.left+e.width+t+n);if(0>s){var u=Math.max(e.left+s,0);s+=e.left-u;var d=e.width+s;c.current.width=d,c.current.left=u,chrome.windows.update(e.id,{width:d,left:u},function(){})}chrome.windows.create({url:a,type:"popup",width:t,height:Math.max(o,e.height),top:e.top,left:c.current.left+c.current.width,focused:!0},function(e){var t=function(n){c&&(n===c.id?(chrome.windows.remove(e.id,function(){}),chrome.windows.onRemoved.removeListener(t)):e&&n===e.id&&(chrome.windows.get(c.id,{populate:!1},function(e){e&&e.left===c.current.left&&e.width===c.current.width&&e.state===c.current.state&&("normal"===c.original.state?chrome.windows.update(c.id,{width:c.original.width,left:c.original.left,state:"normal"},function(){c=null}):chrome.windows.update(c.id,{state:c.original.state},function(){c=null}))}),chrome.windows.onRemoved.removeListener(t)))};chrome.windows.onRemoved.addListener(t)})}})},u=function(e){e?chrome.windows.get(e,{populate:!1},function(e){s(e)}):chrome.windows.getAll({populate:!1},function(e){var t,n,o,r=e.length;if(r){for(t=0;r>t;t++)if(o=e[t],o.focused&&"popup"!==o.state){n=o,s(o);break}if(!n)for(t=0;r>t;t++)if(o=e[t],"popup"!==o.state){n=o,s(o);break}}})};chrome.runtime.onMessage.addListener(function(e,t,n){"openDocked"===e.cmd&&(u(e.windowId),n())}),chrome.commands.onCommand.addListener(function(e){"toggleMainView"===e&&u()})},{"utils/appInfo":2,"utils/log":3,"utils/track":4}],2:[function(e,t,n){"use strict";var o="Chrome",r=chrome.runtime.getManifest(),i=/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],a={id:"hgmnkflcjcohihpdcniifjbafcdelhlm",name:r.name,productId:"tabman",version:r.version,browserVersion:i,browserName:o,getManifest:function(){return r},toJSON:function(){var e,t,n={};for(e in a)a.hasOwnProperty(e)&&(t=a[e],"string"!=typeof t&&"number"!=typeof t||(n[e]=t));return n}};t.exports=a},{}],3:[function(e,t,n){var o=function(){},r=o;r.info=o,r.error=o,t.exports=r},{}],4:[function(e,t,n){"use strict";var o=e("utils/log"),r=e("utils/appInfo"),i=function(){window.ga||(!function(e,t,n,o,r,i,a){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=o,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-11361452-2","auto"),window.ga("set","checkProtocolTask",null),window.ga("set","appName",r.productId),window.ga("set","appId",r.id),window.ga("set","appVersion",r.version))},a=function(e,t,n,a){try{i(),o.info.apply(o.info,["trackEvent",e,t,n,a].filter(Boolean)),window.ga("send","pageview","/"+r.productId+"/"+[e,t,n,a].filter(Boolean).join("/")),window.ga("send","event",{eventCategory:e,eventAction:t,eventLabel:n,eventValue:a})}catch(c){o.error("trackEvent Error",err)}};t.exports={event:a}},{"utils/appInfo":2,"utils/log":3}]},{},[1]);
//# sourceMappingURL=events.js.map
